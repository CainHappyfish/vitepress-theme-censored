# 计算机网络笔记-1

## 😃1.1 什么是Internet

计算机网络：两台以上具有独立操作系统的计算机通过某些介质连接而成的相互共享软硬件资源的集合体。

两大功能：

- 连通
- 共享

Internet：**由网络构成的网络**

- 计算互连**设备**
  - 主机（端系统）
  - 运行网络应用程序
- 分组交换（routers，switches）
- 通信链路
  - 传输速率 = 带宽（bandwidth）
- 网络
  - 设备、路由器、交换机和链路的集合，由机构组织管理

![](https://pic.imgdb.cn/item/65f50e139f345e8d03b6a053.png)

Internet服务描述：

- 提供**网络应用程序**的基础设施
  - 允许终端系统上运行分布式应用程序，并彼此交换数据
- 为分布式应用程序提供**通信服务接口（套接字接口）**
  - 无连接服务connectionless
  - 面向连接服务connection-oriented
  - 不提供数据传递时间保证（发送端到接收端）的服务

### Internet通信控制

**由协议**控制发送和接收信息。

**协议：**定义了两个或多个通信实体间所交换报文的**格式** **(format)**和**次序** **(order)**，以及在报文发送和/或接收或者其他事件方面所采取的**行动（响应）**(actions)。

基本要素：

- 语法：用来规定用户数据与控制信息的格式
- 语义：对具体事件应发出何种控制信息，完成何种动作以及作出何种应答
- 同步：对事件实现顺序的详细说明

> Explain important points
>
> - **distributed** entities, exchanging messages (governed by protocols)
> - Time going down
> - go over definition of protocol (showing **format**, **order** of messages sent and received, and **actions** taken)
>
> We’ll see these kinds of diagrams a lot

所有的因特网标准都以RFC（Request For Comments，请求评论）的形式在因特网上发表。

## 😄1.2 网络边缘部分

- 网络边缘
  - 主机：客户机和服务器
  - 服务器一般位于数据中心内
- 接入网络（物理介质）
  - 有线通信链路
  - 无线通信链路
- 网络核心
  - 互联的路由器
  - 网络组成的网络

- 端系统（主机）
  - 运行网络应用程序
  - 处在网络的边缘
  - 传统主机/网络计算机和瘦客户
- 客户/服务器（C/S模型）
  - 客户请求，并接收服务器提供的服务
- 端对端模型（peer-to-peer model）
  - 极少或不采用专门服务器

## 😎1.3 网络核心部分

基本原理

- **电路交换：**每次会话预留沿其路径（线路）所需的独占资源——电话网
- **分组交换：**数据以离散的数据块通过网络来发送

### 电路交换

网络资源（如带宽）被分片

**多路复用（Multiple Access）**

- 分片分配到会话

- 分片没有被会话使用的情况下，分片空载(不共享)

- 电路级性能（有保证）

- 要求呼叫建立——建立一个专门的端到端线路 (意味着每个链路上预留一个线路)

- 链路带宽分片
  - **频分FDM－frequency division multiplexing**, 按频率划分若干**频段**，每个频段专用于一个连接。
  - **时分TDM－time division multiplexing**, 时间划分为固定区间的**帧**，每帧再划分为固定数量的**时隙**，每一个时隙专用于一个连接，用于传输数据。

电路交换网络：

- **每个链路可有n 条电路**，能够支持 *n* 条同步连接。

- **通信过程**：
  - 在两台主机A、B之间创建一条专用的端到端连接，分别占用每条链路中的一条电路（TDM或者FDM）
  - 该连接获得链路带宽的$1/n$，进行通信。

> ![](https://pic.imgdb.cn/item/65f52fdd9f345e8d037289de.png)

### 分组交换

每个端到端的数据流被划分成分组

- 所有分组**共享**网络资源 
- 每个分组**使用全部链路带宽**
- 资源**按需**使用 

两个关键网络核心功能：

- **转发 Forwarding：** 

  - 也称为“交换”
  - **本地**动作：将分组从路由器的入链路发送到合适的出链路
  - 确定转发出去的接口/链路：根据从“入接口”收到分组头中的目的地址，查找本地路由表，确定“出接口”

- **路由 Routing**：

  - **全局**动作：决定了分组中所包含的源-目的之间的路由
  - 需要路由协议和路由算法，产生路由表

  ![](https://pic.imgdb.cn/item/65f531c79f345e8d037d9b0d.png)

**主机：发送分组**

- 首先接收应用层消息
- 然后将其分解为较小的块，成为分组(packets)，设为 *L* bits
- 以传输速率( *transmission rate* ) *R* bits/sec 发送到接入网
  - 链路传输速率，即链路容量( link capacity )，或链路带宽( link bandwidth )

$$
\text { 分组传输时延 }=\frac{\text { 传输 } L \text {-bit分组 }}{\text { 到链路中的时间 }}=\frac{L \text { (bits) }}{R(\mathrm{bits} / \mathrm{sec})}
$$

![](https://pic.imgdb.cn/item/65f532889f345e8d038215ac.png)

**存储转发（store and forward)**

![](https://pic.imgdb.cn/item/65f532fa9f345e8d0384c3a4.png)

- **分组传输时延：**将 *L* 比特的分组传输（推出）到速率为 *R* bps的链路需要花费 *L*/*R* s

- *存储转发：*整个分组必须都到达路由器后才能传输到下一段链路

- 端到端时延 = 2 *L*/*R* （假定零传播时延）

> *One-hop numerical example:*
>
> *L* = 10 Kbits
>
> *R* = 100 Mbps
>
> one-hop transmission delay = 0.1 msec

**统计复用**

A & B 分组没有固定的顺序——统计复用。在时分复用中，每个主机获得各TDM循环帧的固定时隙。

![](https://pic.imgdb.cn/item/65f533b89f345e8d03897a1b.png)

**资源竞争**

- 资源需求总量可以大于可获得资源的总量
- **拥塞：**采用分组队列，等待使用链路
- **存储转发：**分组每次转发1站
  - 在1个链路上传输
  - 每经过1个链路转发1次
  - 转发分组前，要求收到完整分组

**排队**

![](https://pic.imgdb.cn/item/65f534d19f345e8d039006ae.png)

分组排队及丢失：如果某段时间内，链路上分组到达速率（bps）大于传输速率（bps）：

- 分组将**排队**，等待在出链路上发送
- 如果路由器缓存空间已满，分组会被**丢弃**

![](https://pic.imgdb.cn/item/65f536dd9f345e8d039c6a36.png)

![](https://pic.imgdb.cn/item/65f536f49f345e8d039cea73.png)

## 😉1.4 **Internet主干/ISP的结构组成**

主机A → 本地 ISP → 第二层 ISP →IXP → 第一层 ISP → IXP → 第二层 ISP → 本地 ISP → 主机B

## 😋1.5 分组交换网络中的延迟、丢失和吞吐量

分组延迟的4种类型

![](https://pic.imgdb.cn/item/65f539209f345e8d03a97a1b.png)

- **节点处理时延 Nodal processing delay：**
  - 检查错误位
  - 选择输出链路
  - 高速路由器处理延迟－微秒级
- **排队时延 Queueing delay：**
  - 等待被发送到输出链路上的时间
  - 取决于路由器的拥塞程度

- **传输时延 Transmission delay：**
  - R=链路带宽 (bps)
  - L=分组长度 (bits)
  - 发送分组比特流的时间 = L/R
- **传播时延 Propagation delay：**
  - d = 物理链路的长度
  - s = 介质的信号传播速度 (~2x108 m/sec)
  - 传播延迟 = d/s

![](https://pic.imgdb.cn/item/65f53a3d9f345e8d03b00aa1.png)

![](https://pic.imgdb.cn/item/65f53a8a9f345e8d03b20798.png)

![](https://pic.imgdb.cn/item/65f53acd9f345e8d03b3a87d.png)

![](https://pic.imgdb.cn/item/65f53b189f345e8d03b5541d.png)

### 分组丢失

- 路由器输入链路和输出链路的缓冲区容量有限
- 当分组到达路由器输入链路发现缓冲区已满，则路由器只好**丢弃**分组
- 当分组在路由器内部要转发到输出链路时发现输出缓冲区队列已满，路由器只好**丢弃**分组
- 丢失的分组可能被前路由节点、源节点**重传，或不重传**
- 丢包率或分组丢失率（packet loss rate/ratio）

### 吞吐量

- 网络吞吐量
  - 单位时间内整个网络传输数据的速率或分组数
  - 单位：bps或data packets per second

吞吐量：**接收端**接收到数据的比特速率（bps）

- 瞬时吞吐量：某一瞬间的吞吐量

- 平均吞吐量：一段时间内的吞吐量均值

![](https://pic.imgdb.cn/item/65f53c419f345e8d03bbc8ed.png)

![](https://pic.imgdb.cn/item/65f53c5b9f345e8d03bc577e.png)

## 😆1.6 **协议层及其服务模型**

![](https://pic.imgdb.cn/item/65f53ccb9f345e8d03bf0918.png)

![](https://pic.imgdb.cn/item/65f53cda9f345e8d03bf6c19.png)

数据的封装和解封装：加（拿掉）头部 

- 应用层：报文（message） 
- 运输层：报文段（segment） 
- 网络层：数据报（分组）packet（datagram） 
- 数据链路层：数据帧（frame） 
- 物理层：比特流（bit） 
- 主机上：全部层次，路由器上运行物理层、数据链路层、网络层，交换机上运行物理层、 数据链路层。